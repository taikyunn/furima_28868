{"ast":null,"code":"var pay = function pay() {\n  Payjp.setPublicKey(process.env.PAYJP_PUBLIC_KEY);\n  Payjp.setPublicKey(\"pk_test_cd12f23e23c337b876d71d51\");\n  var form = document.getElementById(\"charge-form\");\n  form.addEventListener(\"submit\", function (e) {\n    e.preventDefault();\n    var formResult = document.getElementById(\"charge-form\");\n    var formData = new FormData(formResult);\n    var card = {\n      number: formData.get(\"number\"),\n      cvc: formData.get(\"cvc\"),\n      exp_month: formData.get(\"exp_month\"),\n      exp_year: \"20\".concat(document.getElementById('exp_year').value)\n    };\n    console;\n    Payjp.createToken(card, function (status, response) {\n      console.log(\"aaa\");\n\n      if (status === 200) {\n        var token = response.id;\n        var renderDom = document.getElementById(\"charge-form\");\n        var tokenObj = \"<input value=\".concat(token, \" type=\\\"hidden\\\" name='token'>\");\n        renderDom.insertAdjacentHTML(\"beforeend\", tokenObj);\n        document.getElementById(\"number\").removeAttribute(\"name\");\n        document.getElementById(\"cvc\").removeAttribute(\"name\");\n        document.getElementById(\"exp_month\").removeAttribute(\"name\");\n        document.getElementById(\"exp_year\").removeAttribute(\"name\");\n        document.getElementById(\"charge-form\").submit();\n        document.getElementById(\"charge-form\").reset();\n      } else {}\n    });\n  });\n};\n\nwindow.addEventListener(\"load\", pay);","map":{"version":3,"sources":["/Users/taichi/projects/furima_28868/app/javascript/card.js"],"names":["pay","Payjp","setPublicKey","process","env","PAYJP_PUBLIC_KEY","form","document","getElementById","addEventListener","e","preventDefault","formResult","formData","FormData","card","number","get","cvc","exp_month","exp_year","value","console","createToken","status","response","log","token","id","renderDom","tokenObj","insertAdjacentHTML","removeAttribute","submit","reset","window"],"mappings":"AAAA,IAAMA,GAAG,GAAG,SAANA,GAAM,GAAM;AAChBC,EAAAA,KAAK,CAACC,YAAN,CAAmBC,OAAO,CAACC,GAAR,CAAYC,gBAA/B;AACAJ,EAAAA,KAAK,CAACC,YAAN,CAAmB,kCAAnB;AACA,MAAMI,IAAI,GAAGC,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAb;AACAF,EAAAA,IAAI,CAACG,gBAAL,CAAsB,QAAtB,EAAgC,UAACC,CAAD,EAAO;AACrCA,IAAAA,CAAC,CAACC,cAAF;AAEA,QAAMC,UAAU,GAAGL,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAnB;AACA,QAAMK,QAAQ,GAAG,IAAIC,QAAJ,CAAaF,UAAb,CAAjB;AAEA,QAAMG,IAAI,GAAG;AACXC,MAAAA,MAAM,EAAEH,QAAQ,CAACI,GAAT,CAAa,QAAb,CADG;AAEXC,MAAAA,GAAG,EAAEL,QAAQ,CAACI,GAAT,CAAa,KAAb,CAFM;AAGXE,MAAAA,SAAS,EAAEN,QAAQ,CAACI,GAAT,CAAa,WAAb,CAHA;AAIXG,MAAAA,QAAQ,cAAOb,QAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCa,KAA3C;AAJG,KAAb;AAMAC,IAAAA,OAAO;AACPrB,IAAAA,KAAK,CAACsB,WAAN,CAAkBR,IAAlB,EAAwB,UAACS,MAAD,EAASC,QAAT,EAAsB;AAC5CH,MAAAA,OAAO,CAACI,GAAR,CAAY,KAAZ;;AACA,UAAIF,MAAM,KAAK,GAAf,EAAoB;AAClB,YAAMG,KAAK,GAAGF,QAAQ,CAACG,EAAvB;AACA,YAAMC,SAAS,GAAGtB,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAlB;AACA,YAAMsB,QAAQ,0BAAmBH,KAAnB,mCAAd;AACAE,QAAAA,SAAS,CAACE,kBAAV,CAA6B,WAA7B,EAA0CD,QAA1C;AACAvB,QAAAA,QAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCwB,eAAlC,CAAkD,MAAlD;AACAzB,QAAAA,QAAQ,CAACC,cAAT,CAAwB,KAAxB,EAA+BwB,eAA/B,CAA+C,MAA/C;AACAzB,QAAAA,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCwB,eAArC,CAAqD,MAArD;AACAzB,QAAAA,QAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCwB,eAApC,CAAoD,MAApD;AACAzB,QAAAA,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCyB,MAAvC;AACA1B,QAAAA,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuC0B,KAAvC;AACD,OAXD,MAWO,CACN;AACF,KAfD;AAgBD,GA7BD;AA8BD,CAlCD;;AAmCAC,MAAM,CAAC1B,gBAAP,CAAwB,MAAxB,EAAgCT,GAAhC","sourcesContent":["const pay = () => {\n  Payjp.setPublicKey(process.env.PAYJP_PUBLIC_KEY);\n  Payjp.setPublicKey(\"pk_test_cd12f23e23c337b876d71d51\");\n  const form = document.getElementById(\"charge-form\");\n  form.addEventListener(\"submit\", (e) => {\n    e.preventDefault();\n\n    const formResult = document.getElementById(\"charge-form\");\n    const formData = new FormData(formResult);\n\n    const card = {\n      number: formData.get(\"number\"),\n      cvc: formData.get(\"cvc\"),\n      exp_month: formData.get(\"exp_month\"),\n      exp_year: `20${document.getElementById('exp_year').value}`,\n    };\n    console\n    Payjp.createToken(card, (status, response) => {\n      console.log(\"aaa\")\n      if (status === 200) {\n        const token = response.id;\n        const renderDom = document.getElementById(\"charge-form\");\n        const tokenObj = `<input value=${token} type=\"hidden\" name='token'>`;\n        renderDom.insertAdjacentHTML(\"beforeend\", tokenObj);\n        document.getElementById(\"number\").removeAttribute(\"name\");\n        document.getElementById(\"cvc\").removeAttribute(\"name\");\n        document.getElementById(\"exp_month\").removeAttribute(\"name\");\n        document.getElementById(\"exp_year\").removeAttribute(\"name\");\n        document.getElementById(\"charge-form\").submit();\n        document.getElementById(\"charge-form\").reset();\n      } else {\n      }\n    });\n  });\n};\nwindow.addEventListener(\"load\", pay);"]},"metadata":{},"sourceType":"module"}